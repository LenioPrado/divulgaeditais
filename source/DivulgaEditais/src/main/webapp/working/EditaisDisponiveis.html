<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">

    <script src="js/jquery-3.2.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.15.1/jquery.validate.min.js"/></script>
 	<script src="notice.json"></script>
</head>

<body>
	
<h1>Editais Cadastrados</h1>
<script>

$.getJSON('notice.json', function(json) {
	$table = $('#notices');
	$.each(json, function(i, value) {
           $('#notices > tbody:last-child').append('<tr><td>' + value.modality.acronyms + '</td><td>' + value.number + '</td><td id="open" onclick="sendNotice('+value.number+')">' + value.object + '</td><td>' + value.trading_date + '</td><td>' + value.url + '</td><td><button id="open" onclick="sendNotice('+value.number+')"> Concorrer </button></td></tr>');
           // onClcick="sendNotice('+value.number+')"
           console.log(value);
        });
    console.log(json); // this will show the info it in firebug console
});

</script>
<table id="notices">
    <tr>
        <th>Modalidade</th><th>Numero</th><th>Objeto</th><th>Data do Pregao</th><th>URL</th><th>Concorrer</th>
    </tr>
</table>
<script>
function sendNotice(noticeNumber){
    window.location.href = "expandedNotice.html";

}

function validation() {
  $("form[name='registerNotice']").validate({
            rules: {
               modality: "required",
                number: "required",
                object: "required",
                trading_date: "required",
                //file: "required",
            },

            messages: {
                modality: "Escolha uma modalidade v√°lida",
                number: "Digite um numero valido",
                object: "Digite um numero valido",
                trading_date: "Selecione uma data valida",
                //file: "Insira um arquivo valido",
            },

    submitHandler: function(form) {
        submit();
    }
  });
    function submit(){

        var jsonArray = [];
        var i=0;
         var splittedFormData = $("form[name='registerNotice']").serialize().split('&');

                item = {};
                increment = {};
            $.each(splittedFormData, function (key, value) {
                var splittedValue = value.split('=');               
                item[splittedValue[0]] = splittedValue[1];
            });
            jsonArray.push(item);

        console.log(jsonArray);
        return true;
        //});
    }
}

function Upload()
{
    var file = document.getElementById('file');

    if(file.files.length)
    {
        var reader = new FileReader();

        reader.onload = function(e)
        {
        	var fileContent = e.target.result;
        	console.log(fileContent);
            //document.getElementById('outputDiv').innerHTML = e.target.result;
        };

        reader.readAsBinaryString(file.files[0]);
    }
}

</script>
</body>
</html>